!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@bilibili/js-bridge")):"function"==typeof define&&define.amd?define(["exports","@bilibili/js-bridge"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).OpenBcut={},t.jsBridge)}(this,(function(t,e){"use strict";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t,e){return t(e={exports:{}},e.exports),e.exports}var o,i,c=function(t){return t&&t.Math==Math&&t},u=c("object"==typeof globalThis&&globalThis)||c("object"==typeof window&&window)||c("object"==typeof self&&self)||c("object"==typeof n&&n)||function(){return this}()||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},f=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s=!a((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),l=Function.prototype.call,p=s?l.bind(l):function(){return l.apply(l,arguments)},d={}.propertyIsEnumerable,v=Object.getOwnPropertyDescriptor,h={f:v&&!d.call({1:2},1)?function(t){var e=v(this,t);return!!e&&e.enumerable}:d},y=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},b=Function.prototype,m=b.bind,g=b.call,w=s&&m.bind(g,g),O=s?function(t){return t&&w(t)}:function(t){return t&&function(){return g.apply(t,arguments)}},S=O({}.toString),j=O("".slice),E=function(t){return j(S(t),8,-1)},x=Object,P=O("".split),T=a((function(){return!x("z").propertyIsEnumerable(0)}))?function(t){return"String"==E(t)?P(t,""):x(t)}:x,R=TypeError,C=function(t){if(null==t)throw R("Can't call method on "+t);return t},I=function(t){return T(C(t))},A=function(t){return"function"==typeof t},M=function(t){return"object"==typeof t?null!==t:A(t)},L=function(t){return A(t)?t:void 0},_=function(t,e){return arguments.length<2?L(u[t]):u[t]&&u[t][e]},N=O({}.isPrototypeOf),U=_("navigator","userAgent")||"",k=u.process,B=u.Deno,F=k&&k.versions||B&&B.version,D=F&&F.v8;D&&(i=(o=D.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!i&&U&&(!(o=U.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=U.match(/Chrome\/(\d+)/))&&(i=+o[1]);var q=i,W=!!Object.getOwnPropertySymbols&&!a((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&q&&q<41})),Q=W&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,z=Object,G=Q?function(t){return"symbol"==typeof t}:function(t){var e=_("Symbol");return A(e)&&N(e.prototype,z(t))},K=String,X=function(t){try{return K(t)}catch(t){return"Object"}},Y=TypeError,V=function(t){if(A(t))return t;throw Y(X(t)+" is not a function")},$=function(t,e){var n=t[e];return null==n?void 0:V(n)},H=TypeError,J=Object.defineProperty,Z=function(t,e){try{J(u,t,{value:e,configurable:!0,writable:!0})}catch(n){u[t]=e}return e},tt="__core-js_shared__",et=u[tt]||Z(tt,{}),nt=r((function(t){(t.exports=function(t,e){return et[t]||(et[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.23.5",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.5/LICENSE",source:"https://github.com/zloirock/core-js"})})),rt=Object,ot=O({}.hasOwnProperty),it=Object.hasOwn||function(t,e){return ot(rt(C(t)),e)},ct=0,ut=Math.random(),at=O(1..toString),ft=function(t){return"Symbol("+(void 0===t?"":t)+")_"+at(++ct+ut,36)},st=nt("wks"),lt=u.Symbol,pt=lt&&lt.for,dt=Q?lt:lt&&lt.withoutSetter||ft,vt=function(t){if(!it(st,t)||!W&&"string"!=typeof st[t]){var e="Symbol."+t;W&&it(lt,t)?st[t]=lt[t]:st[t]=Q&&pt?pt(e):dt(e)}return st[t]},ht=TypeError,yt=vt("toPrimitive"),bt=function(t,e){if(!M(t)||G(t))return t;var n,r=$(t,yt);if(r){if(void 0===e&&(e="default"),n=p(r,t,e),!M(n)||G(n))return n;throw ht("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,r;if("string"===e&&A(n=t.toString)&&!M(r=p(n,t)))return r;if(A(n=t.valueOf)&&!M(r=p(n,t)))return r;if("string"!==e&&A(n=t.toString)&&!M(r=p(n,t)))return r;throw H("Can't convert object to primitive value")}(t,e)},mt=function(t){var e=bt(t,"string");return G(e)?e:e+""},gt=u.document,wt=M(gt)&&M(gt.createElement),Ot=function(t){return wt?gt.createElement(t):{}},St=!f&&!a((function(){return 7!=Object.defineProperty(Ot("div"),"a",{get:function(){return 7}}).a})),jt=Object.getOwnPropertyDescriptor,Et={f:f?jt:function(t,e){if(t=I(t),e=mt(e),St)try{return jt(t,e)}catch(t){}if(it(t,e))return y(!p(h.f,t,e),t[e])}},xt=f&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Pt=String,Tt=TypeError,Rt=function(t){if(M(t))return t;throw Tt(Pt(t)+" is not an object")},Ct=TypeError,It=Object.defineProperty,At=Object.getOwnPropertyDescriptor,Mt="enumerable",Lt="configurable",_t="writable",Nt={f:f?xt?function(t,e,n){if(Rt(t),e=mt(e),Rt(n),"function"==typeof t&&"prototype"===e&&"value"in n&&_t in n&&!n.writable){var r=At(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:Lt in n?n.configurable:r.configurable,enumerable:Mt in n?n.enumerable:r.enumerable,writable:!1})}return It(t,e,n)}:It:function(t,e,n){if(Rt(t),e=mt(e),Rt(n),St)try{return It(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Ct("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Ut=f?function(t,e,n){return Nt.f(t,e,y(1,n))}:function(t,e,n){return t[e]=n,t},kt=Function.prototype,Bt=f&&Object.getOwnPropertyDescriptor,Ft=it(kt,"name"),Dt={EXISTS:Ft,PROPER:Ft&&"something"===function(){}.name,CONFIGURABLE:Ft&&(!f||f&&Bt(kt,"name").configurable)},qt=O(Function.toString);A(et.inspectSource)||(et.inspectSource=function(t){return qt(t)});var Wt,Qt,zt,Gt=et.inspectSource,Kt=u.WeakMap,Xt=A(Kt)&&/native code/.test(Gt(Kt)),Yt=nt("keys"),Vt=function(t){return Yt[t]||(Yt[t]=ft(t))},$t={},Ht="Object already initialized",Jt=u.TypeError,Zt=u.WeakMap;if(Xt||et.state){var te=et.state||(et.state=new Zt),ee=O(te.get),ne=O(te.has),re=O(te.set);Wt=function(t,e){if(ne(te,t))throw new Jt(Ht);return e.facade=t,re(te,t,e),e},Qt=function(t){return ee(te,t)||{}},zt=function(t){return ne(te,t)}}else{var oe=Vt("state");$t[oe]=!0,Wt=function(t,e){if(it(t,oe))throw new Jt(Ht);return e.facade=t,Ut(t,oe,e),e},Qt=function(t){return it(t,oe)?t[oe]:{}},zt=function(t){return it(t,oe)}}var ie={set:Wt,get:Qt,has:zt,enforce:function(t){return zt(t)?Qt(t):Wt(t,{})},getterFor:function(t){return function(e){var n;if(!M(e)||(n=Qt(e)).type!==t)throw Jt("Incompatible receiver, "+t+" required");return n}}},ce=r((function(t){var e=Dt.CONFIGURABLE,n=ie.enforce,r=ie.get,o=Object.defineProperty,i=f&&!a((function(){return 8!==o((function(){}),"length",{value:8}).length})),c=String(String).split("String"),u=t.exports=function(t,r,u){"Symbol("===String(r).slice(0,7)&&(r="["+String(r).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),u&&u.getter&&(r="get "+r),u&&u.setter&&(r="set "+r),(!it(t,"name")||e&&t.name!==r)&&(f?o(t,"name",{value:r,configurable:!0}):t.name=r),i&&u&&it(u,"arity")&&t.length!==u.arity&&o(t,"length",{value:u.arity});try{u&&it(u,"constructor")&&u.constructor?f&&o(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var a=n(t);return it(a,"source")||(a.source=c.join("string"==typeof r?r:"")),t};Function.prototype.toString=u((function(){return A(this)&&r(this).source||Gt(this)}),"toString")})),ue=function(t,e,n,r){r||(r={});var o=r.enumerable,i=void 0!==r.name?r.name:e;if(A(n)&&ce(n,i,r),r.global)o?t[e]=n:Z(e,n);else{try{r.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=n:Nt.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t},ae=Math.ceil,fe=Math.floor,se=Math.trunc||function(t){var e=+t;return(e>0?fe:ae)(e)},le=function(t){var e=+t;return e!=e||0===e?0:se(e)},pe=Math.max,de=Math.min,ve=Math.min,he=function(t){return(e=t.length)>0?ve(le(e),9007199254740991):0;var e},ye=function(t){return function(e,n,r){var o,i=I(e),c=he(i),u=function(t,e){var n=le(t);return n<0?pe(n+e,0):de(n,e)}(r,c);if(t&&n!=n){for(;c>u;)if((o=i[u++])!=o)return!0}else for(;c>u;u++)if((t||u in i)&&i[u]===n)return t||u||0;return!t&&-1}},be={includes:ye(!0),indexOf:ye(!1)}.indexOf,me=O([].push),ge=function(t,e){var n,r=I(t),o=0,i=[];for(n in r)!it($t,n)&&it(r,n)&&me(i,n);for(;e.length>o;)it(r,n=e[o++])&&(~be(i,n)||me(i,n));return i},we=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Oe=we.concat("length","prototype"),Se={f:Object.getOwnPropertyNames||function(t){return ge(t,Oe)}},je={f:Object.getOwnPropertySymbols},Ee=O([].concat),xe=_("Reflect","ownKeys")||function(t){var e=Se.f(Rt(t)),n=je.f;return n?Ee(e,n(t)):e},Pe=function(t,e,n){for(var r=xe(e),o=Nt.f,i=Et.f,c=0;c<r.length;c++){var u=r[c];it(t,u)||n&&it(n,u)||o(t,u,i(e,u))}},Te=/#|\.prototype\./,Re=function(t,e){var n=Ie[Ce(t)];return n==Me||n!=Ae&&(A(e)?a(e):!!e)},Ce=Re.normalize=function(t){return String(t).replace(Te,".").toLowerCase()},Ie=Re.data={},Ae=Re.NATIVE="N",Me=Re.POLYFILL="P",Le=Re,_e=Et.f,Ne=function(t,e){var n,r,o,i,c,a=t.target,f=t.global,s=t.stat;if(n=f?u:s?u[a]||Z(a,{}):(u[a]||{}).prototype)for(r in e){if(i=e[r],o=t.dontCallGetSet?(c=_e(n,r))&&c.value:n[r],!Le(f?r:a+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Pe(i,o)}(t.sham||o&&o.sham)&&Ut(i,"sham",!0),ue(n,r,i,t)}},Ue={};Ue[vt("toStringTag")]="z";var ke,Be="[object z]"===String(Ue),Fe=vt("toStringTag"),De=Object,qe="Arguments"==E(function(){return arguments}()),We=Be?E:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=De(t),Fe))?n:qe?E(e):"Object"==(r=E(e))&&A(e.callee)?"Arguments":r},Qe=String,ze=function(){var t=Rt(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},Ge=u.RegExp,Ke=a((function(){var t=Ge("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),Xe=Ke||a((function(){return!Ge("a","y").sticky})),Ye={BROKEN_CARET:Ke||a((function(){var t=Ge("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:Xe,UNSUPPORTED_Y:Ke},Ve=Object.keys||function(t){return ge(t,we)},$e=f&&!xt?Object.defineProperties:function(t,e){Rt(t);for(var n,r=I(e),o=Ve(e),i=o.length,c=0;i>c;)Nt.f(t,n=o[c++],r[n]);return t},He={f:$e},Je=_("document","documentElement"),Ze=Vt("IE_PROTO"),tn=function(){},en=function(t){return"<script>"+t+"</"+"script>"},nn=function(t){t.write(en("")),t.close();var e=t.parentWindow.Object;return t=null,e},rn=function(){try{ke=new ActiveXObject("htmlfile")}catch(t){}var t,e;rn="undefined"!=typeof document?document.domain&&ke?nn(ke):((e=Ot("iframe")).style.display="none",Je.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(en("document.F=Object")),t.close(),t.F):nn(ke);for(var n=we.length;n--;)delete rn.prototype[we[n]];return rn()};$t[Ze]=!0;var on,cn,un=Object.create||function(t,e){var n;return null!==t?(tn.prototype=Rt(t),n=new tn,tn.prototype=null,n[Ze]=t):n=rn(),void 0===e?n:He.f(n,e)},an=u.RegExp,fn=a((function(){var t=an(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),sn=u.RegExp,ln=a((function(){var t=sn("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),pn=ie.get,dn=nt("native-string-replace",String.prototype.replace),vn=RegExp.prototype.exec,hn=vn,yn=O("".charAt),bn=O("".indexOf),mn=O("".replace),gn=O("".slice),wn=(cn=/b*/g,p(vn,on=/a/,"a"),p(vn,cn,"a"),0!==on.lastIndex||0!==cn.lastIndex),On=Ye.BROKEN_CARET,Sn=void 0!==/()??/.exec("")[1];(wn||Sn||On||fn||ln)&&(hn=function(t){var e,n,r,o,i,c,u,a=this,f=pn(a),s=function(t){if("Symbol"===We(t))throw TypeError("Cannot convert a Symbol value to a string");return Qe(t)}(t),l=f.raw;if(l)return l.lastIndex=a.lastIndex,e=p(hn,l,s),a.lastIndex=l.lastIndex,e;var d=f.groups,v=On&&a.sticky,h=p(ze,a),y=a.source,b=0,m=s;if(v&&(h=mn(h,"y",""),-1===bn(h,"g")&&(h+="g"),m=gn(s,a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==yn(s,a.lastIndex-1))&&(y="(?: "+y+")",m=" "+m,b++),n=new RegExp("^(?:"+y+")",h)),Sn&&(n=new RegExp("^"+y+"$(?!\\s)",h)),wn&&(r=a.lastIndex),o=p(vn,v?n:a,m),v?o?(o.input=gn(o.input,b),o[0]=gn(o[0],b),o.index=a.lastIndex,a.lastIndex+=o[0].length):a.lastIndex=0:wn&&o&&(a.lastIndex=a.global?o.index+o[0].length:r),Sn&&o&&o.length>1&&p(dn,o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&d)for(o.groups=c=un(null),i=0;i<d.length;i++)c[(u=d[i])[0]]=o[u[1]];return o});Ne({target:"RegExp",proto:!0,forced:/./.exec!==hn},{exec:hn});var jn="process"==E(u.process),En=String,xn=TypeError,Pn=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=O(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Rt(n),function(t){if("object"==typeof t||A(t))return t;throw xn("Can't set "+En(t)+" as a prototype")}(r),e?t(n,r):n.__proto__=r,n}}():void 0),Tn=Nt.f,Rn=vt("toStringTag"),Cn=vt("species"),In=TypeError,An=function(){},Mn=[],Ln=_("Reflect","construct"),_n=/^\s*(?:class|function)\b/,Nn=O(_n.exec),Un=!_n.exec(An),kn=function(t){if(!A(t))return!1;try{return Ln(An,Mn,t),!0}catch(t){return!1}},Bn=function(t){if(!A(t))return!1;switch(We(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Un||!!Nn(_n,Gt(t))}catch(t){return!0}};Bn.sham=!0;var Fn,Dn,qn,Wn,Qn=!Ln||a((function(){var t;return kn(kn.call)||!kn(Object)||!kn((function(){t=!0}))||t}))?Bn:kn,zn=TypeError,Gn=vt("species"),Kn=function(t,e){var n,r=Rt(t).constructor;return void 0===r||null==(n=Rt(r)[Gn])?e:function(t){if(Qn(t))return t;throw zn(X(t)+" is not a constructor")}(n)},Xn=Function.prototype,Yn=Xn.apply,Vn=Xn.call,$n="object"==typeof Reflect&&Reflect.apply||(s?Vn.bind(Yn):function(){return Vn.apply(Yn,arguments)}),Hn=O(O.bind),Jn=function(t,e){return V(t),void 0===e?t:s?Hn(t,e):function(){return t.apply(e,arguments)}},Zn=O([].slice),tr=TypeError,er=function(t,e){if(t<e)throw tr("Not enough arguments");return t},nr=/(?:ipad|iphone|ipod).*applewebkit/i.test(U),rr=u.setImmediate,or=u.clearImmediate,ir=u.process,cr=u.Dispatch,ur=u.Function,ar=u.MessageChannel,fr=u.String,sr=0,lr={},pr="onreadystatechange";try{Fn=u.location}catch(t){}var dr=function(t){if(it(lr,t)){var e=lr[t];delete lr[t],e()}},vr=function(t){return function(){dr(t)}},hr=function(t){dr(t.data)},yr=function(t){u.postMessage(fr(t),Fn.protocol+"//"+Fn.host)};rr&&or||(rr=function(t){er(arguments.length,1);var e=A(t)?t:ur(t),n=Zn(arguments,1);return lr[++sr]=function(){$n(e,void 0,n)},Dn(sr),sr},or=function(t){delete lr[t]},jn?Dn=function(t){ir.nextTick(vr(t))}:cr&&cr.now?Dn=function(t){cr.now(vr(t))}:ar&&!nr?(Wn=(qn=new ar).port2,qn.port1.onmessage=hr,Dn=Jn(Wn.postMessage,Wn)):u.addEventListener&&A(u.postMessage)&&!u.importScripts&&Fn&&"file:"!==Fn.protocol&&!a(yr)?(Dn=yr,u.addEventListener("message",hr,!1)):Dn=pr in Ot("script")?function(t){Je.appendChild(Ot("script")).onreadystatechange=function(){Je.removeChild(this),dr(t)}}:function(t){setTimeout(vr(t),0)});var br,mr,gr,wr,Or,Sr,jr,Er,xr={set:rr,clear:or},Pr=/ipad|iphone|ipod/i.test(U)&&void 0!==u.Pebble,Tr=/web0s(?!.*chrome)/i.test(U),Rr=Et.f,Cr=xr.set,Ir=u.MutationObserver||u.WebKitMutationObserver,Ar=u.document,Mr=u.process,Lr=u.Promise,_r=Rr(u,"queueMicrotask"),Nr=_r&&_r.value;Nr||(br=function(){var t,e;for(jn&&(t=Mr.domain)&&t.exit();mr;){e=mr.fn,mr=mr.next;try{e()}catch(t){throw mr?wr():gr=void 0,t}}gr=void 0,t&&t.enter()},nr||jn||Tr||!Ir||!Ar?!Pr&&Lr&&Lr.resolve?((jr=Lr.resolve(void 0)).constructor=Lr,Er=Jn(jr.then,jr),wr=function(){Er(br)}):jn?wr=function(){Mr.nextTick(br)}:(Cr=Jn(Cr,u),wr=function(){Cr(br)}):(Or=!0,Sr=Ar.createTextNode(""),new Ir(br).observe(Sr,{characterData:!0}),wr=function(){Sr.data=Or=!Or}));var Ur=Nr||function(t){var e={fn:t,next:void 0};gr&&(gr.next=e),mr||(mr=e,wr()),gr=e},kr=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Br=function(){this.head=null,this.tail=null};Br.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var Fr=Br,Dr=u.Promise,qr="object"==typeof window&&"object"!=typeof Deno;Dr&&Dr.prototype;var Wr,Qr,zr,Gr,Kr,Xr,Yr=vt("species"),Vr=!1,$r=A(u.PromiseRejectionEvent),Hr=Le("Promise",(function(){var t=Gt(Dr),e=t!==String(Dr);if(!e&&66===q)return!0;if(q>=51&&/native code/.test(t))return!1;var n=new Dr((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[Yr]=r,!(Vr=n.then((function(){}))instanceof r)||!e&&qr&&!$r})),Jr={CONSTRUCTOR:Hr,REJECTION_EVENT:$r,SUBCLASSING:Vr},Zr=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=V(e),this.reject=V(n)},to={f:function(t){return new Zr(t)}},eo=xr.set,no="Promise",ro=Jr.CONSTRUCTOR,oo=Jr.REJECTION_EVENT,io=Jr.SUBCLASSING,co=ie.getterFor(no),uo=ie.set,ao=Dr&&Dr.prototype,fo=Dr,so=ao,lo=u.TypeError,po=u.document,vo=u.process,ho=to.f,yo=ho,bo=!!(po&&po.createEvent&&u.dispatchEvent),mo="unhandledrejection",go=function(t){var e;return!(!M(t)||!A(e=t.then))&&e},wo=function(t,e){var n,r,o,i=e.value,c=1==e.state,u=c?t.ok:t.fail,a=t.resolve,f=t.reject,s=t.domain;try{u?(c||(2===e.rejection&&xo(e),e.rejection=1),!0===u?n=i:(s&&s.enter(),n=u(i),s&&(s.exit(),o=!0)),n===t.promise?f(lo("Promise-chain cycle")):(r=go(n))?p(r,n,a,f):a(n)):f(i)}catch(t){s&&!o&&s.exit(),f(t)}},Oo=function(t,e){t.notified||(t.notified=!0,Ur((function(){for(var n,r=t.reactions;n=r.get();)wo(n,t);t.notified=!1,e&&!t.rejection&&jo(t)})))},So=function(t,e,n){var r,o;bo?((r=po.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},!oo&&(o=u["on"+t])?o(r):t===mo&&function(t,e){var n=u.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},jo=function(t){p(eo,u,(function(){var e,n=t.facade,r=t.value;if(Eo(t)&&(e=kr((function(){jn?vo.emit("unhandledRejection",r,n):So(mo,n,r)})),t.rejection=jn||Eo(t)?2:1,e.error))throw e.value}))},Eo=function(t){return 1!==t.rejection&&!t.parent},xo=function(t){p(eo,u,(function(){var e=t.facade;jn?vo.emit("rejectionHandled",e):So("rejectionhandled",e,t.value)}))},Po=function(t,e,n){return function(r){t(e,r,n)}},To=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Oo(t,!0))},Ro=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw lo("Promise can't be resolved itself");var r=go(e);r?Ur((function(){var n={done:!1};try{p(r,e,Po(Ro,n,t),Po(To,n,t))}catch(e){To(n,e,t)}})):(t.value=e,t.state=1,Oo(t,!1))}catch(e){To({done:!1},e,t)}}};if(ro&&(so=(fo=function(t){!function(t,e){if(N(e,t))return t;throw In("Incorrect invocation")}(this,so),V(t),p(Wr,this);var e=co(this);try{t(Po(Ro,e),Po(To,e))}catch(t){To(e,t)}}).prototype,(Wr=function(t){uo(this,{type:no,done:!1,notified:!1,parent:!1,reactions:new Fr,rejection:!1,state:0,value:void 0})}).prototype=ue(so,"then",(function(t,e){var n=co(this),r=ho(Kn(this,fo));return n.parent=!0,r.ok=!A(t)||t,r.fail=A(e)&&e,r.domain=jn?vo.domain:void 0,0==n.state?n.reactions.add(r):Ur((function(){wo(r,n)})),r.promise})),Qr=function(){var t=new Wr,e=co(t);this.promise=t,this.resolve=Po(Ro,e),this.reject=Po(To,e)},to.f=ho=function(t){return t===fo||undefined===t?new Qr(t):yo(t)},A(Dr)&&ao!==Object.prototype)){zr=ao.then,io||ue(ao,"then",(function(t,e){var n=this;return new fo((function(t,e){p(zr,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete ao.constructor}catch(t){}Pn&&Pn(ao,so)}Ne({global:!0,constructor:!0,wrap:!0,forced:ro},{Promise:fo}),Kr=no,Xr=!1,(Gr=fo)&&!Xr&&(Gr=Gr.prototype),Gr&&!it(Gr,Rn)&&Tn(Gr,Rn,{configurable:!0,value:Kr}),function(t){var e=_(t),n=Nt.f;f&&e&&!e[Cn]&&n(e,Cn,{configurable:!0,get:function(){return this}})}(no);var Co={},Io=vt("iterator"),Ao=Array.prototype,Mo=vt("iterator"),Lo=function(t){if(null!=t)return $(t,Mo)||$(t,"@@iterator")||Co[We(t)]},_o=TypeError,No=function(t,e,n){var r,o;Rt(t);try{if(!(r=$(t,"return"))){if("throw"===e)throw n;return n}r=p(r,t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return Rt(r),n},Uo=TypeError,ko=function(t,e){this.stopped=t,this.result=e},Bo=ko.prototype,Fo=function(t,e,n){var r,o,i,c,u,a,f,s,l=n&&n.that,d=!(!n||!n.AS_ENTRIES),v=!(!n||!n.IS_RECORD),h=!(!n||!n.IS_ITERATOR),y=!(!n||!n.INTERRUPTED),b=Jn(e,l),m=function(t){return r&&No(r,"normal",t),new ko(!0,t)},g=function(t){return d?(Rt(t),y?b(t[0],t[1],m):b(t[0],t[1])):y?b(t,m):b(t)};if(v)r=t.iterator;else if(h)r=t;else{if(!(o=Lo(t)))throw Uo(X(t)+" is not iterable");if(void 0!==(s=o)&&(Co.Array===s||Ao[Io]===s)){for(i=0,c=he(t);c>i;i++)if((u=g(t[i]))&&N(Bo,u))return u;return new ko(!1)}r=function(t,e){var n=arguments.length<2?Lo(t):e;if(V(n))return Rt(p(n,t));throw _o(X(t)+" is not iterable")}(t,o)}for(a=v?t.next:r.next;!(f=p(a,r)).done;){try{u=g(f.value)}catch(t){No(r,"throw",t)}if("object"==typeof u&&u&&N(Bo,u))return u}return new ko(!1)},Do=vt("iterator"),qo=!1;try{var Wo=0,Qo={next:function(){return{done:!!Wo++}},return:function(){qo=!0}};Qo[Do]=function(){return this},Array.from(Qo,(function(){throw 2}))}catch(t){}var zo=Jr.CONSTRUCTOR||!function(t,e){if(!e&&!qo)return!1;var n=!1;try{var r={};r[Do]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}((function(t){Dr.all(t).then(void 0,(function(){}))}));Ne({target:"Promise",stat:!0,forced:zo},{all:function(t){var e=this,n=to.f(e),r=n.resolve,o=n.reject,i=kr((function(){var n=V(e.resolve),i=[],c=0,u=1;Fo(t,(function(t){var a=c++,f=!1;u++,p(n,e,t).then((function(t){f||(f=!0,i[a]=t,--u||r(i))}),o)})),--u||r(i)}));return i.error&&o(i.value),n.promise}});var Go=Jr.CONSTRUCTOR,Ko=Dr&&Dr.prototype;if(Ne({target:"Promise",proto:!0,forced:Go,real:!0},{catch:function(t){return this.then(void 0,t)}}),A(Dr)){var Xo=_("Promise").prototype.catch;Ko.catch!==Xo&&ue(Ko,"catch",Xo,{unsafe:!0})}Ne({target:"Promise",stat:!0,forced:zo},{race:function(t){var e=this,n=to.f(e),r=n.reject,o=kr((function(){var o=V(e.resolve);Fo(t,(function(t){p(o,e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}}),Ne({target:"Promise",stat:!0,forced:Jr.CONSTRUCTOR},{reject:function(t){var e=to.f(this);return p(e.reject,void 0,t),e.promise}});var Yo=Jr.CONSTRUCTOR;_("Promise"),Ne({target:"Promise",stat:!0,forced:Yo},{resolve:function(t){return function(t,e){if(Rt(t),M(e)&&e.constructor===t)return e;var n=to.f(t);return(0,n.resolve)(e),n.promise}(this,t)}});var Vo=function(){var t=navigator.userAgent;return{baiduspider:/Baiduspider/.test(t),QQLive:/QQLive/i.test(t),mqq:/QQ\/([\d\.]+)/i.test(t),weibo:/Weibo/i.test(t),MicroMessenger:/MicroMessenger/i.test(t),mbaidu:/baiduboxapp/i.test(t),iqiyi:/iqiyi/i.test(t),qq:/MQQBrowser/i.test(t),mobile:/AppleWebKit.*Mobile.*/i.test(t),uc:/UCBrowser/i.test(t),xiaomiqjs:/MiuiQuickSearchBox/.test(t),dianping:/dianping/.test(t),ios:/\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(t),android:/Android/i.test(t)||/Linux/i.test(t),windowsphone:/Windows Phone/i.test(t),iPhone:/iPhone/i.test(t),iPad:/iPad/i.test(t),webApp:!/Safari/i.test(t),baidu:/Baidu/i.test(t),Youku:/youku/i.test(t),chrome:/CriOS/i.test(t),CMDC:/CMDC/i.test(t),BiliApp:/BiliApp/i.test(t)}};e.initEnv();var $o="undefined"==typeof window?"":window.navigator.userAgent,Ho=/android|adr|linux/gi.test($o),Jo=/\(i[^;]+;( U;)? CPU.+Mac OS X/i.test($o),Zo="https://www.bilibili.com/blackboard/activity-XLNUvLvI6b.html",ti="https://apps.apple.com/cn/app/%E5%BF%85%E5%89%AA/id1299589486",ei="https://dl.hdslb.com/mobile/latest/bilistudio/android_bbs-master.apk",ni=null,ri=function(t,n){return new Promise((function(r,o){(function(t){return new Promise((function(n,r){e.isSupport(t).then((function(t){t?n(1):r(new Error("您的App版本太低，请升级至最新版本"))}))}))})(t).then((function(){e.biliBridge.callNative({method:t,data:n,callback:function(t){r(t)}})}),o)}))},oi=function(t){return e.inBiliApp?Ho?(n=Vo(),void(e.inBiliApp&&n.android?ri("utils.openWithBrowser",{url:ei}).then((function(t){return 0===t.code||Promise.reject(new Error("下载失败"))})):n.ios&&(window.location.href=ti))):ri("biliapp.jumpToScheme",{url:t}):Promise.reject();var n},ii=function(){(document.hidden||document.webkitHidden)&&ni&&clearTimeout(ni)};t.addEventListener=function(){document.addEventListener("visibilitychange",ii,!1),document.addEventListener("webkitvisibilitychange",ii,!1),window.addEventListener("pagehide",ii,!1)},t.immediateDownload=function(t,e){Ho&&(location.href=t||ei),Jo&&(location.href=e||ti)},t.openBcut=function(t){var n="bcut://",r=ti,o=ei,i="com.bilibili.studio",c=Zo;return"string"==typeof t?n=t||n:t&&(n=t.schema||n,r=t.iosStoreURL||r,o=t.androidURL||o,i=t.packageName||i,c=t.middlePageURl||Zo),e.inBiliApp?function(t,n){return e.inBiliApp?Ho?ri("utils.isInstalled",{packageName:t}).then((function(t){return t&&t.isInstalled})):ri("ability.canOpenApplication",{url:n}).then((function(t){return 0===t.code||-3!==t.code&&Promise.reject(new Error(t.errMsg))})):Promise.reject()}(i,n).then((function(t){return t?(o=n,e.inBiliApp?ri(Ho?"ability.openScheme":"ability.openApplication",{url:o}).then((function(t){return 0===t.code||Promise.reject(new Error("应用唤醒失败"))})):Promise.reject()):oi(r);var o})):(function(t){var e=Vo();if(e.MicroMessenger||e.mqq||e.weibo)return location.href=t.middlePageURl+"?schema="+t.schema,!1;location.href=t.schema,ni=setTimeout((function(){Ho&&(location.href=t.androidURL),Jo&&(location.href=t.iosStoreURL)}),3e3)}({schema:n,androidURL:o,iosStoreURL:r,middlePageURl:c}),Promise.resolve())},t.removeEventListener=function(){document.removeEventListener("visibilitychange",ii,!1),document.removeEventListener("webkitvisibilitychange",ii,!1),window.removeEventListener("pagehide",ii,!1)},Object.defineProperty(t,"__esModule",{value:!0})}));
