!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@bilibili/js-bridge")):"function"==typeof define&&define.amd?define(["exports","@bilibili/js-bridge"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).OpenBcut={},t.jsBridge)}(this,(function(t,e){"use strict";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t,e){return t(e={exports:{}},e.exports),e.exports}var o,i,c=function(t){return t&&t.Math==Math&&t},u=c("object"==typeof globalThis&&globalThis)||c("object"==typeof window&&window)||c("object"==typeof self&&self)||c("object"==typeof n&&n)||function(){return this}()||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},f=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s=!a((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),l=Function.prototype.call,p=s?l.bind(l):function(){return l.apply(l,arguments)},d={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,v={f:h&&!d.call({1:2},1)?function(t){var e=h(this,t);return!!e&&e.enumerable}:d},b=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},m=Function.prototype,y=m.bind,g=m.call,w=s&&y.bind(g,g),S=s?function(t){return t&&w(t)}:function(t){return t&&function(){return g.apply(t,arguments)}},O=S({}.toString),j=S("".slice),E=function(t){return j(O(t),8,-1)},x=Object,P=S("".split),T=a((function(){return!x("z").propertyIsEnumerable(0)}))?function(t){return"String"==E(t)?P(t,""):x(t)}:x,R=TypeError,C=function(t){if(null==t)throw R("Can't call method on "+t);return t},I=function(t){return T(C(t))},A=function(t){return"function"==typeof t},M=function(t){return"object"==typeof t?null!==t:A(t)},_=function(t){return A(t)?t:void 0},U=function(t,e){return arguments.length<2?_(u[t]):u[t]&&u[t][e]},L=S({}.isPrototypeOf),N=U("navigator","userAgent")||"",k=u.process,B=u.Deno,F=k&&k.versions||B&&B.version,D=F&&F.v8;D&&(i=(o=D.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!i&&N&&(!(o=N.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=N.match(/Chrome\/(\d+)/))&&(i=+o[1]);var q=i,W=!!Object.getOwnPropertySymbols&&!a((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&q&&q<41})),Q=W&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,z=Object,G=Q?function(t){return"symbol"==typeof t}:function(t){var e=U("Symbol");return A(e)&&L(e.prototype,z(t))},K=String,H=function(t){try{return K(t)}catch(t){return"Object"}},X=TypeError,Y=function(t){if(A(t))return t;throw X(H(t)+" is not a function")},V=function(t,e){var n=t[e];return null==n?void 0:Y(n)},$=TypeError,J=Object.defineProperty,Z=function(t,e){try{J(u,t,{value:e,configurable:!0,writable:!0})}catch(n){u[t]=e}return e},tt="__core-js_shared__",et=u[tt]||Z(tt,{}),nt=r((function(t){(t.exports=function(t,e){return et[t]||(et[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.23.5",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.5/LICENSE",source:"https://github.com/zloirock/core-js"})})),rt=Object,ot=S({}.hasOwnProperty),it=Object.hasOwn||function(t,e){return ot(rt(C(t)),e)},ct=0,ut=Math.random(),at=S(1..toString),ft=function(t){return"Symbol("+(void 0===t?"":t)+")_"+at(++ct+ut,36)},st=nt("wks"),lt=u.Symbol,pt=lt&&lt.for,dt=Q?lt:lt&&lt.withoutSetter||ft,ht=function(t){if(!it(st,t)||!W&&"string"!=typeof st[t]){var e="Symbol."+t;W&&it(lt,t)?st[t]=lt[t]:st[t]=Q&&pt?pt(e):dt(e)}return st[t]},vt=TypeError,bt=ht("toPrimitive"),mt=function(t,e){if(!M(t)||G(t))return t;var n,r=V(t,bt);if(r){if(void 0===e&&(e="default"),n=p(r,t,e),!M(n)||G(n))return n;throw vt("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,r;if("string"===e&&A(n=t.toString)&&!M(r=p(n,t)))return r;if(A(n=t.valueOf)&&!M(r=p(n,t)))return r;if("string"!==e&&A(n=t.toString)&&!M(r=p(n,t)))return r;throw $("Can't convert object to primitive value")}(t,e)},yt=function(t){var e=mt(t,"string");return G(e)?e:e+""},gt=u.document,wt=M(gt)&&M(gt.createElement),St=function(t){return wt?gt.createElement(t):{}},Ot=!f&&!a((function(){return 7!=Object.defineProperty(St("div"),"a",{get:function(){return 7}}).a})),jt=Object.getOwnPropertyDescriptor,Et={f:f?jt:function(t,e){if(t=I(t),e=yt(e),Ot)try{return jt(t,e)}catch(t){}if(it(t,e))return b(!p(v.f,t,e),t[e])}},xt=f&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Pt=String,Tt=TypeError,Rt=function(t){if(M(t))return t;throw Tt(Pt(t)+" is not an object")},Ct=TypeError,It=Object.defineProperty,At=Object.getOwnPropertyDescriptor,Mt="enumerable",_t="configurable",Ut="writable",Lt={f:f?xt?function(t,e,n){if(Rt(t),e=yt(e),Rt(n),"function"==typeof t&&"prototype"===e&&"value"in n&&Ut in n&&!n.writable){var r=At(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:_t in n?n.configurable:r.configurable,enumerable:Mt in n?n.enumerable:r.enumerable,writable:!1})}return It(t,e,n)}:It:function(t,e,n){if(Rt(t),e=yt(e),Rt(n),Ot)try{return It(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Ct("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Nt=f?function(t,e,n){return Lt.f(t,e,b(1,n))}:function(t,e,n){return t[e]=n,t},kt=Function.prototype,Bt=f&&Object.getOwnPropertyDescriptor,Ft=it(kt,"name"),Dt={EXISTS:Ft,PROPER:Ft&&"something"===function(){}.name,CONFIGURABLE:Ft&&(!f||f&&Bt(kt,"name").configurable)},qt=S(Function.toString);A(et.inspectSource)||(et.inspectSource=function(t){return qt(t)});var Wt,Qt,zt,Gt=et.inspectSource,Kt=u.WeakMap,Ht=A(Kt)&&/native code/.test(Gt(Kt)),Xt=nt("keys"),Yt=function(t){return Xt[t]||(Xt[t]=ft(t))},Vt={},$t="Object already initialized",Jt=u.TypeError,Zt=u.WeakMap;if(Ht||et.state){var te=et.state||(et.state=new Zt),ee=S(te.get),ne=S(te.has),re=S(te.set);Wt=function(t,e){if(ne(te,t))throw new Jt($t);return e.facade=t,re(te,t,e),e},Qt=function(t){return ee(te,t)||{}},zt=function(t){return ne(te,t)}}else{var oe=Yt("state");Vt[oe]=!0,Wt=function(t,e){if(it(t,oe))throw new Jt($t);return e.facade=t,Nt(t,oe,e),e},Qt=function(t){return it(t,oe)?t[oe]:{}},zt=function(t){return it(t,oe)}}var ie={set:Wt,get:Qt,has:zt,enforce:function(t){return zt(t)?Qt(t):Wt(t,{})},getterFor:function(t){return function(e){var n;if(!M(e)||(n=Qt(e)).type!==t)throw Jt("Incompatible receiver, "+t+" required");return n}}},ce=r((function(t){var e=Dt.CONFIGURABLE,n=ie.enforce,r=ie.get,o=Object.defineProperty,i=f&&!a((function(){return 8!==o((function(){}),"length",{value:8}).length})),c=String(String).split("String"),u=t.exports=function(t,r,u){"Symbol("===String(r).slice(0,7)&&(r="["+String(r).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),u&&u.getter&&(r="get "+r),u&&u.setter&&(r="set "+r),(!it(t,"name")||e&&t.name!==r)&&(f?o(t,"name",{value:r,configurable:!0}):t.name=r),i&&u&&it(u,"arity")&&t.length!==u.arity&&o(t,"length",{value:u.arity});try{u&&it(u,"constructor")&&u.constructor?f&&o(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var a=n(t);return it(a,"source")||(a.source=c.join("string"==typeof r?r:"")),t};Function.prototype.toString=u((function(){return A(this)&&r(this).source||Gt(this)}),"toString")})),ue=function(t,e,n,r){r||(r={});var o=r.enumerable,i=void 0!==r.name?r.name:e;if(A(n)&&ce(n,i,r),r.global)o?t[e]=n:Z(e,n);else{try{r.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=n:Lt.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t},ae=Math.ceil,fe=Math.floor,se=Math.trunc||function(t){var e=+t;return(e>0?fe:ae)(e)},le=function(t){var e=+t;return e!=e||0===e?0:se(e)},pe=Math.max,de=Math.min,he=Math.min,ve=function(t){return(e=t.length)>0?he(le(e),9007199254740991):0;var e},be=function(t){return function(e,n,r){var o,i=I(e),c=ve(i),u=function(t,e){var n=le(t);return n<0?pe(n+e,0):de(n,e)}(r,c);if(t&&n!=n){for(;c>u;)if((o=i[u++])!=o)return!0}else for(;c>u;u++)if((t||u in i)&&i[u]===n)return t||u||0;return!t&&-1}},me={includes:be(!0),indexOf:be(!1)}.indexOf,ye=S([].push),ge=function(t,e){var n,r=I(t),o=0,i=[];for(n in r)!it(Vt,n)&&it(r,n)&&ye(i,n);for(;e.length>o;)it(r,n=e[o++])&&(~me(i,n)||ye(i,n));return i},we=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Se=we.concat("length","prototype"),Oe={f:Object.getOwnPropertyNames||function(t){return ge(t,Se)}},je={f:Object.getOwnPropertySymbols},Ee=S([].concat),xe=U("Reflect","ownKeys")||function(t){var e=Oe.f(Rt(t)),n=je.f;return n?Ee(e,n(t)):e},Pe=function(t,e,n){for(var r=xe(e),o=Lt.f,i=Et.f,c=0;c<r.length;c++){var u=r[c];it(t,u)||n&&it(n,u)||o(t,u,i(e,u))}},Te=/#|\.prototype\./,Re=function(t,e){var n=Ie[Ce(t)];return n==Me||n!=Ae&&(A(e)?a(e):!!e)},Ce=Re.normalize=function(t){return String(t).replace(Te,".").toLowerCase()},Ie=Re.data={},Ae=Re.NATIVE="N",Me=Re.POLYFILL="P",_e=Re,Ue=Et.f,Le=function(t,e){var n,r,o,i,c,a=t.target,f=t.global,s=t.stat;if(n=f?u:s?u[a]||Z(a,{}):(u[a]||{}).prototype)for(r in e){if(i=e[r],o=t.dontCallGetSet?(c=Ue(n,r))&&c.value:n[r],!_e(f?r:a+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Pe(i,o)}(t.sham||o&&o.sham)&&Nt(i,"sham",!0),ue(n,r,i,t)}},Ne={};Ne[ht("toStringTag")]="z";var ke,Be="[object z]"===String(Ne),Fe=ht("toStringTag"),De=Object,qe="Arguments"==E(function(){return arguments}()),We=Be?E:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=De(t),Fe))?n:qe?E(e):"Object"==(r=E(e))&&A(e.callee)?"Arguments":r},Qe=String,ze=function(){var t=Rt(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},Ge=u.RegExp,Ke=a((function(){var t=Ge("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),He=Ke||a((function(){return!Ge("a","y").sticky})),Xe={BROKEN_CARET:Ke||a((function(){var t=Ge("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:He,UNSUPPORTED_Y:Ke},Ye=Object.keys||function(t){return ge(t,we)},Ve=f&&!xt?Object.defineProperties:function(t,e){Rt(t);for(var n,r=I(e),o=Ye(e),i=o.length,c=0;i>c;)Lt.f(t,n=o[c++],r[n]);return t},$e={f:Ve},Je=U("document","documentElement"),Ze=Yt("IE_PROTO"),tn=function(){},en=function(t){return"<script>"+t+"</"+"script>"},nn=function(t){t.write(en("")),t.close();var e=t.parentWindow.Object;return t=null,e},rn=function(){try{ke=new ActiveXObject("htmlfile")}catch(t){}var t,e;rn="undefined"!=typeof document?document.domain&&ke?nn(ke):((e=St("iframe")).style.display="none",Je.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(en("document.F=Object")),t.close(),t.F):nn(ke);for(var n=we.length;n--;)delete rn.prototype[we[n]];return rn()};Vt[Ze]=!0;var on,cn,un=Object.create||function(t,e){var n;return null!==t?(tn.prototype=Rt(t),n=new tn,tn.prototype=null,n[Ze]=t):n=rn(),void 0===e?n:$e.f(n,e)},an=u.RegExp,fn=a((function(){var t=an(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),sn=u.RegExp,ln=a((function(){var t=sn("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),pn=ie.get,dn=nt("native-string-replace",String.prototype.replace),hn=RegExp.prototype.exec,vn=hn,bn=S("".charAt),mn=S("".indexOf),yn=S("".replace),gn=S("".slice),wn=(cn=/b*/g,p(hn,on=/a/,"a"),p(hn,cn,"a"),0!==on.lastIndex||0!==cn.lastIndex),Sn=Xe.BROKEN_CARET,On=void 0!==/()??/.exec("")[1];(wn||On||Sn||fn||ln)&&(vn=function(t){var e,n,r,o,i,c,u,a=this,f=pn(a),s=function(t){if("Symbol"===We(t))throw TypeError("Cannot convert a Symbol value to a string");return Qe(t)}(t),l=f.raw;if(l)return l.lastIndex=a.lastIndex,e=p(vn,l,s),a.lastIndex=l.lastIndex,e;var d=f.groups,h=Sn&&a.sticky,v=p(ze,a),b=a.source,m=0,y=s;if(h&&(v=yn(v,"y",""),-1===mn(v,"g")&&(v+="g"),y=gn(s,a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==bn(s,a.lastIndex-1))&&(b="(?: "+b+")",y=" "+y,m++),n=new RegExp("^(?:"+b+")",v)),On&&(n=new RegExp("^"+b+"$(?!\\s)",v)),wn&&(r=a.lastIndex),o=p(hn,h?n:a,y),h?o?(o.input=gn(o.input,m),o[0]=gn(o[0],m),o.index=a.lastIndex,a.lastIndex+=o[0].length):a.lastIndex=0:wn&&o&&(a.lastIndex=a.global?o.index+o[0].length:r),On&&o&&o.length>1&&p(dn,o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&d)for(o.groups=c=un(null),i=0;i<d.length;i++)c[(u=d[i])[0]]=o[u[1]];return o});Le({target:"RegExp",proto:!0,forced:/./.exec!==vn},{exec:vn});var jn="process"==E(u.process),En=String,xn=TypeError,Pn=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=S(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Rt(n),function(t){if("object"==typeof t||A(t))return t;throw xn("Can't set "+En(t)+" as a prototype")}(r),e?t(n,r):n.__proto__=r,n}}():void 0),Tn=Lt.f,Rn=ht("toStringTag"),Cn=ht("species"),In=TypeError,An=function(){},Mn=[],_n=U("Reflect","construct"),Un=/^\s*(?:class|function)\b/,Ln=S(Un.exec),Nn=!Un.exec(An),kn=function(t){if(!A(t))return!1;try{return _n(An,Mn,t),!0}catch(t){return!1}},Bn=function(t){if(!A(t))return!1;switch(We(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Nn||!!Ln(Un,Gt(t))}catch(t){return!0}};Bn.sham=!0;var Fn,Dn,qn,Wn,Qn=!_n||a((function(){var t;return kn(kn.call)||!kn(Object)||!kn((function(){t=!0}))||t}))?Bn:kn,zn=TypeError,Gn=ht("species"),Kn=function(t,e){var n,r=Rt(t).constructor;return void 0===r||null==(n=Rt(r)[Gn])?e:function(t){if(Qn(t))return t;throw zn(H(t)+" is not a constructor")}(n)},Hn=Function.prototype,Xn=Hn.apply,Yn=Hn.call,Vn="object"==typeof Reflect&&Reflect.apply||(s?Yn.bind(Xn):function(){return Yn.apply(Xn,arguments)}),$n=S(S.bind),Jn=function(t,e){return Y(t),void 0===e?t:s?$n(t,e):function(){return t.apply(e,arguments)}},Zn=S([].slice),tr=TypeError,er=function(t,e){if(t<e)throw tr("Not enough arguments");return t},nr=/(?:ipad|iphone|ipod).*applewebkit/i.test(N),rr=u.setImmediate,or=u.clearImmediate,ir=u.process,cr=u.Dispatch,ur=u.Function,ar=u.MessageChannel,fr=u.String,sr=0,lr={},pr="onreadystatechange";try{Fn=u.location}catch(t){}var dr=function(t){if(it(lr,t)){var e=lr[t];delete lr[t],e()}},hr=function(t){return function(){dr(t)}},vr=function(t){dr(t.data)},br=function(t){u.postMessage(fr(t),Fn.protocol+"//"+Fn.host)};rr&&or||(rr=function(t){er(arguments.length,1);var e=A(t)?t:ur(t),n=Zn(arguments,1);return lr[++sr]=function(){Vn(e,void 0,n)},Dn(sr),sr},or=function(t){delete lr[t]},jn?Dn=function(t){ir.nextTick(hr(t))}:cr&&cr.now?Dn=function(t){cr.now(hr(t))}:ar&&!nr?(Wn=(qn=new ar).port2,qn.port1.onmessage=vr,Dn=Jn(Wn.postMessage,Wn)):u.addEventListener&&A(u.postMessage)&&!u.importScripts&&Fn&&"file:"!==Fn.protocol&&!a(br)?(Dn=br,u.addEventListener("message",vr,!1)):Dn=pr in St("script")?function(t){Je.appendChild(St("script")).onreadystatechange=function(){Je.removeChild(this),dr(t)}}:function(t){setTimeout(hr(t),0)});var mr,yr,gr,wr,Sr,Or,jr,Er,xr={set:rr,clear:or},Pr=/ipad|iphone|ipod/i.test(N)&&void 0!==u.Pebble,Tr=/web0s(?!.*chrome)/i.test(N),Rr=Et.f,Cr=xr.set,Ir=u.MutationObserver||u.WebKitMutationObserver,Ar=u.document,Mr=u.process,_r=u.Promise,Ur=Rr(u,"queueMicrotask"),Lr=Ur&&Ur.value;Lr||(mr=function(){var t,e;for(jn&&(t=Mr.domain)&&t.exit();yr;){e=yr.fn,yr=yr.next;try{e()}catch(t){throw yr?wr():gr=void 0,t}}gr=void 0,t&&t.enter()},nr||jn||Tr||!Ir||!Ar?!Pr&&_r&&_r.resolve?((jr=_r.resolve(void 0)).constructor=_r,Er=Jn(jr.then,jr),wr=function(){Er(mr)}):jn?wr=function(){Mr.nextTick(mr)}:(Cr=Jn(Cr,u),wr=function(){Cr(mr)}):(Sr=!0,Or=Ar.createTextNode(""),new Ir(mr).observe(Or,{characterData:!0}),wr=function(){Or.data=Sr=!Sr}));var Nr=Lr||function(t){var e={fn:t,next:void 0};gr&&(gr.next=e),yr||(yr=e,wr()),gr=e},kr=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Br=function(){this.head=null,this.tail=null};Br.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var Fr=Br,Dr=u.Promise,qr="object"==typeof window&&"object"!=typeof Deno;Dr&&Dr.prototype;var Wr,Qr,zr,Gr,Kr,Hr,Xr=ht("species"),Yr=!1,Vr=A(u.PromiseRejectionEvent),$r=_e("Promise",(function(){var t=Gt(Dr),e=t!==String(Dr);if(!e&&66===q)return!0;if(q>=51&&/native code/.test(t))return!1;var n=new Dr((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[Xr]=r,!(Yr=n.then((function(){}))instanceof r)||!e&&qr&&!Vr})),Jr={CONSTRUCTOR:$r,REJECTION_EVENT:Vr,SUBCLASSING:Yr},Zr=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Y(e),this.reject=Y(n)},to={f:function(t){return new Zr(t)}},eo=xr.set,no="Promise",ro=Jr.CONSTRUCTOR,oo=Jr.REJECTION_EVENT,io=Jr.SUBCLASSING,co=ie.getterFor(no),uo=ie.set,ao=Dr&&Dr.prototype,fo=Dr,so=ao,lo=u.TypeError,po=u.document,ho=u.process,vo=to.f,bo=vo,mo=!!(po&&po.createEvent&&u.dispatchEvent),yo="unhandledrejection",go=function(t){var e;return!(!M(t)||!A(e=t.then))&&e},wo=function(t,e){var n,r,o,i=e.value,c=1==e.state,u=c?t.ok:t.fail,a=t.resolve,f=t.reject,s=t.domain;try{u?(c||(2===e.rejection&&xo(e),e.rejection=1),!0===u?n=i:(s&&s.enter(),n=u(i),s&&(s.exit(),o=!0)),n===t.promise?f(lo("Promise-chain cycle")):(r=go(n))?p(r,n,a,f):a(n)):f(i)}catch(t){s&&!o&&s.exit(),f(t)}},So=function(t,e){t.notified||(t.notified=!0,Nr((function(){for(var n,r=t.reactions;n=r.get();)wo(n,t);t.notified=!1,e&&!t.rejection&&jo(t)})))},Oo=function(t,e,n){var r,o;mo?((r=po.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},!oo&&(o=u["on"+t])?o(r):t===yo&&function(t,e){var n=u.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},jo=function(t){p(eo,u,(function(){var e,n=t.facade,r=t.value;if(Eo(t)&&(e=kr((function(){jn?ho.emit("unhandledRejection",r,n):Oo(yo,n,r)})),t.rejection=jn||Eo(t)?2:1,e.error))throw e.value}))},Eo=function(t){return 1!==t.rejection&&!t.parent},xo=function(t){p(eo,u,(function(){var e=t.facade;jn?ho.emit("rejectionHandled",e):Oo("rejectionhandled",e,t.value)}))},Po=function(t,e,n){return function(r){t(e,r,n)}},To=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,So(t,!0))},Ro=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw lo("Promise can't be resolved itself");var r=go(e);r?Nr((function(){var n={done:!1};try{p(r,e,Po(Ro,n,t),Po(To,n,t))}catch(e){To(n,e,t)}})):(t.value=e,t.state=1,So(t,!1))}catch(e){To({done:!1},e,t)}}};if(ro&&(so=(fo=function(t){!function(t,e){if(L(e,t))return t;throw In("Incorrect invocation")}(this,so),Y(t),p(Wr,this);var e=co(this);try{t(Po(Ro,e),Po(To,e))}catch(t){To(e,t)}}).prototype,(Wr=function(t){uo(this,{type:no,done:!1,notified:!1,parent:!1,reactions:new Fr,rejection:!1,state:0,value:void 0})}).prototype=ue(so,"then",(function(t,e){var n=co(this),r=vo(Kn(this,fo));return n.parent=!0,r.ok=!A(t)||t,r.fail=A(e)&&e,r.domain=jn?ho.domain:void 0,0==n.state?n.reactions.add(r):Nr((function(){wo(r,n)})),r.promise})),Qr=function(){var t=new Wr,e=co(t);this.promise=t,this.resolve=Po(Ro,e),this.reject=Po(To,e)},to.f=vo=function(t){return t===fo||undefined===t?new Qr(t):bo(t)},A(Dr)&&ao!==Object.prototype)){zr=ao.then,io||ue(ao,"then",(function(t,e){var n=this;return new fo((function(t,e){p(zr,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete ao.constructor}catch(t){}Pn&&Pn(ao,so)}Le({global:!0,constructor:!0,wrap:!0,forced:ro},{Promise:fo}),Kr=no,Hr=!1,(Gr=fo)&&!Hr&&(Gr=Gr.prototype),Gr&&!it(Gr,Rn)&&Tn(Gr,Rn,{configurable:!0,value:Kr}),function(t){var e=U(t),n=Lt.f;f&&e&&!e[Cn]&&n(e,Cn,{configurable:!0,get:function(){return this}})}(no);var Co={},Io=ht("iterator"),Ao=Array.prototype,Mo=ht("iterator"),_o=function(t){if(null!=t)return V(t,Mo)||V(t,"@@iterator")||Co[We(t)]},Uo=TypeError,Lo=function(t,e,n){var r,o;Rt(t);try{if(!(r=V(t,"return"))){if("throw"===e)throw n;return n}r=p(r,t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return Rt(r),n},No=TypeError,ko=function(t,e){this.stopped=t,this.result=e},Bo=ko.prototype,Fo=function(t,e,n){var r,o,i,c,u,a,f,s,l=n&&n.that,d=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),v=!(!n||!n.IS_ITERATOR),b=!(!n||!n.INTERRUPTED),m=Jn(e,l),y=function(t){return r&&Lo(r,"normal",t),new ko(!0,t)},g=function(t){return d?(Rt(t),b?m(t[0],t[1],y):m(t[0],t[1])):b?m(t,y):m(t)};if(h)r=t.iterator;else if(v)r=t;else{if(!(o=_o(t)))throw No(H(t)+" is not iterable");if(void 0!==(s=o)&&(Co.Array===s||Ao[Io]===s)){for(i=0,c=ve(t);c>i;i++)if((u=g(t[i]))&&L(Bo,u))return u;return new ko(!1)}r=function(t,e){var n=arguments.length<2?_o(t):e;if(Y(n))return Rt(p(n,t));throw Uo(H(t)+" is not iterable")}(t,o)}for(a=h?t.next:r.next;!(f=p(a,r)).done;){try{u=g(f.value)}catch(t){Lo(r,"throw",t)}if("object"==typeof u&&u&&L(Bo,u))return u}return new ko(!1)},Do=ht("iterator"),qo=!1;try{var Wo=0,Qo={next:function(){return{done:!!Wo++}},return:function(){qo=!0}};Qo[Do]=function(){return this},Array.from(Qo,(function(){throw 2}))}catch(t){}var zo=Jr.CONSTRUCTOR||!function(t,e){if(!e&&!qo)return!1;var n=!1;try{var r={};r[Do]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}((function(t){Dr.all(t).then(void 0,(function(){}))}));Le({target:"Promise",stat:!0,forced:zo},{all:function(t){var e=this,n=to.f(e),r=n.resolve,o=n.reject,i=kr((function(){var n=Y(e.resolve),i=[],c=0,u=1;Fo(t,(function(t){var a=c++,f=!1;u++,p(n,e,t).then((function(t){f||(f=!0,i[a]=t,--u||r(i))}),o)})),--u||r(i)}));return i.error&&o(i.value),n.promise}});var Go=Jr.CONSTRUCTOR,Ko=Dr&&Dr.prototype;if(Le({target:"Promise",proto:!0,forced:Go,real:!0},{catch:function(t){return this.then(void 0,t)}}),A(Dr)){var Ho=U("Promise").prototype.catch;Ko.catch!==Ho&&ue(Ko,"catch",Ho,{unsafe:!0})}Le({target:"Promise",stat:!0,forced:zo},{race:function(t){var e=this,n=to.f(e),r=n.reject,o=kr((function(){var o=Y(e.resolve);Fo(t,(function(t){p(o,e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}}),Le({target:"Promise",stat:!0,forced:Jr.CONSTRUCTOR},{reject:function(t){var e=to.f(this);return p(e.reject,void 0,t),e.promise}});var Xo=Jr.CONSTRUCTOR;U("Promise"),Le({target:"Promise",stat:!0,forced:Xo},{resolve:function(t){return function(t,e){if(Rt(t),M(e)&&e.constructor===t)return e;var n=to.f(t);return(0,n.resolve)(e),n.promise}(this,t)}});var Yo=function(){var t=navigator.userAgent;return{baiduspider:/Baiduspider/.test(t),QQLive:/QQLive/i.test(t),mqq:/QQ\/([\d\.]+)/i.test(t),weibo:/Weibo/i.test(t),MicroMessenger:/MicroMessenger/i.test(t),mbaidu:/baiduboxapp/i.test(t),iqiyi:/iqiyi/i.test(t),qq:/MQQBrowser/i.test(t),mobile:/AppleWebKit.*Mobile.*/i.test(t),uc:/UCBrowser/i.test(t),xiaomiqjs:/MiuiQuickSearchBox/.test(t),dianping:/dianping/.test(t),ios:/\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(t),android:/Android/i.test(t)||/Linux/i.test(t),windowsphone:/Windows Phone/i.test(t),iPhone:/iPhone/i.test(t),iPad:/iPad/i.test(t),webApp:!/Safari/i.test(t),baidu:/Baidu/i.test(t),Youku:/youku/i.test(t),chrome:/CriOS/i.test(t),CMDC:/CMDC/i.test(t),BiliApp:/BiliApp/i.test(t)}};e.initEnv();var Vo="undefined"==typeof window?"":window.navigator.userAgent,$o=/android|adr|linux/gi.test(Vo),Jo=/\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(Vo),Zo="https://www.bilibili.com/blackboard/activity-XLNUvLvI6b.html",ti="https://apps.apple.com/cn/app/%E5%BF%85%E5%89%AA/id1299589486",ei="https://dl.hdslb.com/mobile/latest/bilistudio/android_bbs-master.apk",ni=null,ri=function(t,n){return new Promise((function(r,o){(function(t){return new Promise((function(n,r){e.isSupport(t).then((function(t){t?n(1):r(new Error("您的App版本太低，请升级至最新版本"))}))}))})(t).then((function(){e.biliBridge.callNative({method:t,data:n,callback:function(t){r(t)}})}),o)}))},oi=function(t){return e.inBiliApp?$o?(n=Yo(),void(e.inBiliApp&&n.android?ri("utils.openWithBrowser",{url:ei}).then((function(t){return 0===t.code||Promise.reject(new Error("下载失败"))})):n.ios&&(window.location.href=ti))):ri("biliapp.jumpToScheme",{url:t}):Promise.reject();var n},ii=function(){(document.hidden||document.webkitHidden)&&ni&&clearTimeout(ni)};t.addEventListener=function(){document.addEventListener("visibilitychange",ii,!1),document.addEventListener("webkitvisibilitychange",ii,!1),window.addEventListener("pagehide",ii,!1)},t.immediateDownload=function(t,e){$o&&(location.href=t||ei),Jo&&(location.href=e||ti)},t.openBcut=function(t){var n="bcut://",r=ti,o=ei,i="com.bilibili.studio",c=Zo,u="bcutSchema",a="";return"string"==typeof t?n=t||n:t&&(n=t.schema||n,r=t.iosStoreURL||r,o=t.androidURL||o,i=t.packageName||i,c=t.middlePageURl||Zo,u=t.schemaType||"bcutSchema",a=t.pageurl||""),e.inBiliApp?("bcutSchemaH5"===u&&(n="bcut://studio/main?index=0"),function(t,n){return e.inBiliApp?$o?ri("utils.isInstalled",{packageName:t}).then((function(t){return t&&t.isInstalled})):ri("ability.canOpenApplication",{url:n}).then((function(t){return 0===t.code||-3!==t.code&&Promise.reject(new Error(t.errMsg))})):Promise.reject()}(i,n).then((function(t){return t?function(t,n,r){return e.inBiliApp?"bcutSchemaH5"===r?(console.log("--进入了调用H5的页面"),location.href=Jo?"bilibili://uper/appTraffic?appName=com.bilibili.studio&appScheme=bcut://studio/web/?h5_url="+encodeURIComponent(n):"bcut://studio/web/?h5_url="+encodeURIComponent(n),Promise.resolve()):ri($o?"ability.openScheme":"ability.openApplication",{url:t}).then((function(t){return 0===t.code||Promise.reject(new Error("应用唤醒失败"))})):Promise.reject()}(n,a,u):oi(r)}))):(function(t){var e=Yo();if(e.MicroMessenger||e.mqq||e.weibo)return location.href=t.middlePageURl+"?schema="+t.schema,!1;location.href=t.schema,ni=setTimeout((function(){$o&&(location.href=t.androidURL),Jo&&(location.href=t.iosStoreURL)}),3e3)}({schema:n,androidURL:o,iosStoreURL:r,middlePageURl:c}),Promise.resolve())},t.removeEventListener=function(){document.removeEventListener("visibilitychange",ii,!1),document.removeEventListener("webkitvisibilitychange",ii,!1),window.removeEventListener("pagehide",ii,!1)},Object.defineProperty(t,"__esModule",{value:!0})}));
